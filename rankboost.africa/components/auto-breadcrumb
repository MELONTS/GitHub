"use client";

import React from "react";
import Link from "next/link";
import { usePathname } from "next/navigation";

// Optional custom naming overrides
const overrides = {
  seo: "SEO",
  "seo-services": "SEO Services",
  rankboost: "RankBoost",
};

function formatSegment(seg) {
  if (overrides[seg]) return overrides[seg];
  return seg.replace(/-/g, " ").replace(/\b\w/g, (c) => c.toUpperCase());
}

export default function AutoBreadcrumb() {
  const pathname = usePathname();

  if (!pathname || pathname === "/") return null;

  const parts = pathname.split("/").filter(Boolean);

  const buildHref = (i) => "/" + parts.slice(0, i + 1).join("/");

  return (
    <nav aria-label="breadcrumb" className="w-full py-2">
      <ol className="flex flex-wrap items-center gap-2 text-sm">
        <li>
          <Link href="/" className="text-muted-foreground hover:text-foreground">
            Home
          </Link>
        </li>

        {parts.map((p, i) => {
          const label = formatSegment(p);
          const isLast = i === parts.length - 1;

          return (
            <React.Fragment key={i}>
              <li className="text-muted-foreground">/</li>

              <li>
                {isLast ? (
                  <span className="font-medium">{label}</span>
                ) : (
                  <Link
                    href={buildHref(i)}
                    className="text-muted-foreground hover:text-foreground"
                  >
                    {label}
                  </Link>
                )}
              </li>
            </React.Fragment>
          );
        })}
      </ol>
    </nav>
  );
}